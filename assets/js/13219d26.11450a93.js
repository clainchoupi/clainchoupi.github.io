"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[20],{4137:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),l=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=r,g=c["".concat(u,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4645:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(7462),r=(n(7294),n(4137));const o={title:"Docusaurus \ud83d\udda4 GitHub pages",authors:["pcla"],tags:["Docusaurus","GitHub","CI/CD"],keywords:["Docusaurus","GitHub","CI/CD"]},i=void 0,s={permalink:"/blog/2023/05/13/Docusaurus_github",source:"@site/blog/2023-05-13-Docusaurus_github.md",title:"Docusaurus \ud83d\udda4 GitHub pages",description:"En parall\xe8le du d\xe9ploiement de sites sur GitLab, je teste aussi la cr\xe9ation d'un blog et d'une page de profil sur GitHub Pages.",date:"2023-05-13T00:00:00.000Z",formattedDate:"13 mai 2023",tags:[{label:"Docusaurus",permalink:"/blog/tags/docusaurus"},{label:"GitHub",permalink:"/blog/tags/git-hub"},{label:"CI/CD",permalink:"/blog/tags/ci-cd"}],readingTime:1.725,hasTruncateMarker:!0,authors:[{name:"Clainchoupi",url:"https://github.com/clainchoupi",imageURL:"https://avatars.githubusercontent.com/u/5754412",key:"pcla"}],frontMatter:{title:"Docusaurus \ud83d\udda4 GitHub pages",authors:["pcla"],tags:["Docusaurus","GitHub","CI/CD"],keywords:["Docusaurus","GitHub","CI/CD"]},nextItem:{title:"Docusaurus \ud83e\udde1 GitLab pages",permalink:"/blog/2023/05/13/Docusaurus_gitlab"}},u={authorsImageUrls:[void 0]},l=[{value:"Configuration cot\xe9 Docusaurus",id:"configuration-cot\xe9-docusaurus",level:3},{value:"Gestion du pipeline GitHub",id:"gestion-du-pipeline-github",level:3}],p={toc:l},c="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(c,(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"En parall\xe8le du ",(0,r.kt)("a",{parentName:"p",href:"/blog/2023/05/13/Docusaurus_gitlab"},"d\xe9ploiement de sites sur GitLab"),", je teste aussi la cr\xe9ation d'un blog et d'une page de profil sur GitHub Pages.",(0,r.kt)("br",{parentName:"p"}),"\n","La documentation de Docusaurus contient des exemples pour Netlify, Vercel ou GitHub Pages, \xe0 retrouver ici : ",(0,r.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/deployment"},"https://docusaurus.io/docs/deployment"),", mais j'ai tout de m\xeame eu besoin de faire quelques ajustements."),(0,r.kt)("p",null,"Je vais donc d\xe9tailler un petit peu les actions n\xe9cessaires pour un d\xe9ploiement sur GitHub Pages de votre site Docusaurus."),(0,r.kt)("h3",{id:"configuration-cot\xe9-docusaurus"},"Configuration cot\xe9 Docusaurus"),(0,r.kt)("p",null,"Tr\xe8s peu de modifications sont n\xe9cessaires, et elles sont bien d\xe9crites dans la documentation de Docusaurus.\nDe mon cot\xe9 j'ai suivi le tuto pour faire un d\xe9ploiement avec les GitHub Actions :  ",(0,r.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions"},"https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions")," "),(0,r.kt)("h3",{id:"gestion-du-pipeline-github"},"Gestion du pipeline GitHub"),(0,r.kt)("p",null,"Voici un exemple de cr\xe9ation de pipeline simpliste ",(0,r.kt)("inlineCode",{parentName:"p"},".github\\workflows\\publish.yml"),".",(0,r.kt)("br",{parentName:"p"}),"\n","Ici notre pipeline ne fait qu'un build du projet et d\xe9pose le r\xe9sultat dans la branche ",(0,r.kt)("strong",{parentName:"p"},"gh-pages"),".",(0,r.kt)("br",{parentName:"p"}),"\n","On peut imaginer facilement mettre en oeuvre des workflows de validation des articles et contenus, et de ne publier que lors d'un tag ou d'une action manuelle."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  deploy:\n    name: Deploy to GitHub Pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 16\n\n      - name: Install dependencies\n        run: npm install\n      - name: Build website\n        run: npm run build\n\n      # Popular action to deploy to GitHub Pages:\n      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          # Build output to publish to the `gh-pages` branch:\n          publish_dir: ./build\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"En suivant la documentation et en utilisant l'Action ",(0,r.kt)("inlineCode",{parentName:"p"},"peaceiris/actions-gh-pages@v3"),", quelques ajustements ont \xe9t\xe9 n\xe9cessaires "),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"node-version: 16 au lieu de 18"),(0,r.kt)("li",{parentName:"ul"},"passage \xe0 npm install et npm run au lieu de Yarn (pour \xeatre coh\xe9rent ave cmon usage en local)"),(0,r.kt)("li",{parentName:"ul"},"j'ai du ajouter les droits Read & Write sur mon repo ",(0,r.kt)("strong",{parentName:"li"},"/settings/actions > General"),(0,r.kt)("img",{alt:"Permission du workflow",src:n(6993).Z,width:"986",height:"245"})),(0,r.kt)("li",{parentName:"ul"},"cr\xe9ation de la branche ",(0,r.kt)("strong",{parentName:"li"},"gh-pages")," car c'est sur celle ci que l'Action fait le d\xe9ploiement"),(0,r.kt)("li",{parentName:"ul"},"modification de la branche source des d\xe9ploiements de Pages sur mon repo ",(0,r.kt)("strong",{parentName:"li"},"/settings/pages"),(0,r.kt)("img",{alt:"Source de deploiement des pages",src:n(2047).Z,width:"701",height:"271"})))))}d.isMDXComponent=!0},2047:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/2023-05-13-workflow_deploy_source-1b8129cd4be7b259d11a0bf7e3a0e62f.png"},6993:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/2023-05-13-workflow_permissions-a4a2b3b26ed396e2e07c598aa3e794ca.png"}}]);